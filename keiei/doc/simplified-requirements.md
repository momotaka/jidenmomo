# 廃棄物処理業 経営戦略支援システム - 簡易仕様書

## システム概要
廃棄物処理業を営む企業の社長が月2回使用する経営戦略立案支援ツール。3つの事業部門（産業廃棄物・一般廃棄物・清掃サービス）の売上・原価データとお客様情報を基に、業界特性を踏まえた実践的な経営戦略のアドバイスを提供する。

## 主要機能

### 1. データ入力機能
- **部門別売上データ入力**
  - 産業廃棄物：処理量(t)、処理単価、収集運搬売上
  - 一般廃棄物：定期回収契約数、月額契約金額、スポット売上
  - 清掃サービス：施工件数、案件単価、サービス種別
  - 各部門共通：直接原価、粗利益
- **顧客情報入力**
  - 企業情報（業種、規模、取引部門）
  - 契約形態（スポット/定期/長期）
  - 要望・クレーム内容
  - 支払条件・与信情報

### 2. 分析・レポート機能
- **収益性分析**
  - 粗利率・営業利益率の計算
  - 商品別/顧客層別の収益性評価
- **経営戦略アドバイス**
  - 部門別の収益改善提案
  - クロスセル機会の特定と提案方法
  - 業界特有の季節戦略・価格戦略
  - 施設稼働率・車両効率の最適化提案
- **レポート出力**
  - 分析結果のPDF出力
  - グラフ・チャートによる可視化

### 3. 認証機能
- セッションベースの簡易認証
- ログイン画面（ID/パスワード）
- セッション管理（PHP session使用）

## 技術仕様

### 使用技術
- **フロントエンド**: HTML5, CSS3, JavaScript (Vanilla JS)
- **バックエンド**: PHP 8.x
- **データベース**: MySQL 8.0
- **その他**: Chart.js（グラフ表示用）

### システム構成
```
keiei/
├── index.php          # ログイン画面
├── dashboard.php      # メインダッシュボード
├── input/             # データ入力画面
│   ├── sales.php      # 売上データ入力
│   └── customer.php   # 顧客情報入力
├── analysis/          # 分析画面
│   ├── profit.php     # 収益性分析
│   └── strategy.php   # 戦略提案
├── report/            # レポート機能
│   └── generate.php   # PDF生成
├── includes/          # 共通処理
│   ├── auth.php       # 認証処理
│   ├── db.php         # DB接続
│   └── functions.php  # 共通関数
├── assets/            # 静的ファイル
│   ├── css/
│   ├── js/
│   └── images/
└── sql/               # データベース定義
    └── schema.sql
```

### データベース設計（主要テーブル）
1. **users** - ユーザー情報
2. **department_sales** - 部門別売上データ
3. **customers** - 顧客情報（業種・取引部門含む）
4. **customer_feedback** - 顧客要望・クレーム
5. **industry_kpis** - 業界特有KPI（処理量、稼働率等）
6. **cross_sell_opportunities** - クロスセル機会管理
7. **analysis_results** - 分析結果保存
8. **strategy_advice** - 戦略アドバイス履歴

## 画面遷移
1. ログイン画面 → ダッシュボード
2. ダッシュボード → 各種入力画面/分析画面
3. 分析画面 → レポート生成/ダウンロード

## セキュリティ考慮事項
- パスワードのハッシュ化（password_hash使用）
- SQLインジェクション対策（プリペアドステートメント使用）
- XSS対策（htmlspecialchars使用）
- セッションハイジャック対策

## 今後の拡張性
- CSVインポート機能
- 複数期間の比較分析
- AIを活用した高度な戦略提案（将来的にPython連携）